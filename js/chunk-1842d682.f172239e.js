(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1842d682"],{1511:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-container",{attrs:{fluid:"","grid-list-lg":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("loading",{attrs:{value:t.isLoading}}),e("v-flex",{attrs:{xs12:""}},[e("v-card",{attrs:{color:"purple lighten-2"}},[e("v-card-text",[e("v-text-field",{attrs:{label:t.$t("user.account"),readonly:""},model:{value:t.account.address,callback:function(a){t.$set(t.account,"address",a)},expression:"account.address"}}),e("v-text-field",{attrs:{label:t.$t("user.referrer"),readonly:""},model:{value:t.account.referrer,callback:function(a){t.$set(t.account,"referrer",a)},expression:"account.referrer"}})],1)],1)],1),e("v-flex",{attrs:{xs12:""}},[e("v-tabs",{attrs:{grow:"",color:"blue lighten-2","slider-color":"primary"}},[e("v-tab",{attrs:{href:"#tabMain-1"}},[t._v(t._s(t.$t("user.tab.primary.title")))]),e("v-tab",{attrs:{href:"#tabMain-2"},on:{click:t.refreshUsers}},[t._v(t._s(t.$t("user.tab.secondary.title")))]),e("v-tabs-items",[e("v-tab-item",{attrs:{value:"tabMain-1"}},[e("v-alert",{staticClass:"ma-0 pa-2",attrs:{value:0==t.team.teamId,type:"warning"}},[t._v("\n                            "+t._s(t.$t("user.join.alert"))+"\n                            "),e("v-dialog",{attrs:{persistent:""},model:{value:t.joinDialog,callback:function(a){t.joinDialog=a},expression:"joinDialog"}},[e("v-btn",{staticClass:"ma-0",attrs:{slot:"activator",disabled:t.team.teamId>0,color:"primary"},slot:"activator"},[t._v(t._s(t.$t("user.join.button")))]),e("v-card",[e("v-card-title",{staticClass:"ma-0 pa-2"},[e("h3",{staticClass:"ml-1 mt-1"},[t._v(t._s(t.$t("user.join.title")))]),e("v-spacer"),e("v-btn",{staticClass:"ma-0 pa-0",attrs:{icon:""},on:{click:function(a){t.joinDialog=!1}}},[e("v-icon",[t._v("close")])],1)],1),e("v-divider"),e("v-card-text",{staticClass:"pa-0"},[e("v-form",{ref:"form"},[e("v-list",{staticClass:"mx-2"},[e("v-list-tile",{staticClass:"mt-3 mb-2"},[e("v-text-field",{attrs:{label:t.$t("user.referrer"),rules:[function(){return t.$web3.utils.isAddress(t.account.referrer)||t.$t("user.join.invalidAddress")}],clearable:""},model:{value:t.account.referrer,callback:function(a){t.$set(t.account,"referrer",a)},expression:"account.referrer"}})],1),e("v-list-tile",{staticClass:"mt-3 mb-2"},[e("v-text-field",{attrs:{label:t.$t("user.join.price"),suffix:"TCH",disabled:""},model:{value:t.team.options.price,callback:function(a){t.$set(t.team.options,"price",a)},expression:"team.options.price"}})],1)],1)],1)],1),e("v-divider"),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{flat:""},on:{click:function(a){t.joinDialog=!1}}},[t._v(t._s(t.$t("cancel")))]),e("v-btn",{attrs:{color:"primary",loading:t.btnLoading},on:{click:t.join}},[t._v(t._s(t.$t("user.join.button")))])],1)],1)],1)],1),e("v-card",{attrs:{color:"blue-grey"}},[e("v-card-text",{staticClass:"pa-0"},[e("v-list",{staticClass:"py-0 transparent"},[e("v-subheader",[t._v("\n                                        "+t._s(t.$t("user.tab.primary.userId",[t.account.userId]))+"\n                                        "),e("v-spacer"),t._v("\n                                        "+t._s(t.$t("user.tab.primary.userSize",[t.account.children]))+"\n                                    ")],1),e("v-divider"),e("v-list-tile",[e("v-list-tile-title",[t._v(t._s(t.$t("user.tab.primary.userEarnings",[parseFloat(t.account.payouts).toFixed(4)]))+" TCH")])],1),e("v-divider"),e("v-subheader",[t._v("\n                                        "+t._s(t.$t("user.tab.primary.teamId",[t.account.teamId]))+"\n                                        "),e("v-spacer"),t._v("\n                                        "+t._s(t.$t("user.tab.primary.teamSize",[t.team.size]))+"\n                                    ")],1),e("v-divider"),t.team.teamId>0?e("v-list-tile",[e("v-list-tile-title",[t._v(t._s(t.$t("user.tab.primary.teamEarnings",[parseFloat(t.team.payouts).toFixed(4)]))+" TCH")])],1):t._e(),e("v-divider"),e("v-subheader",[t._v("\n                                        "+t._s(t.$t("user.tab.primary.withdrawable"))+"\n                                        "),e("v-spacer"),e("v-btn",{staticClass:"ma-0",attrs:{disabled:t.account.earnings-t.account.payouts==0||t.team.earnings-t.team.payouts==0,color:"primary",loading:t.btnLoading},on:{click:t.withdraw}},[t._v(t._s(t.$t("user.tab.primary.withdrawal")))])],1),e("v-divider"),e("v-list-tile",[e("v-list-tile-title",[t._v(t._s(t.$t("user.tab.primary.userEarnings",[parseFloat(t.account.earnings-t.account.payouts).toFixed(4)]))+" TCH")])],1),e("v-divider"),t.team.teamId>0?e("v-list-tile",[e("v-list-tile-title",[t._v(t._s(t.$t("user.tab.primary.teamEarnings",[parseFloat(t.team.earnings-t.team.payouts).toFixed(4)]))+" TCH")])],1):t._e(),e("v-divider")],1)],1)],1)],1),e("v-tab-item",{attrs:{value:"tabMain-2"}},[e("v-alert",{staticClass:"ma-0 pa-2",attrs:{value:"1",type:"success"}},[t._v("\n                            "+t._s(t.$t("user.tab.secondary.info"))+"\n                            "),e("v-btn",{staticClass:"ma-0",attrs:{loading:t.btnLoading,color:"primary"},on:{click:t.refreshUsers}},[t._v(t._s(t.$t("refresh")))])],1),e("v-card",{attrs:{color:"blue-grey"}},[e("v-card-text",{staticClass:"pa-0"},[0==t.account.users.length?[e("v-list",{staticClass:"py-0 transparent"},[e("v-list-tile",[e("v-list-tile-title",[t._v(t._s(t.$t("noResultsText")))])],1),e("v-divider")],1)]:t._e(),t._l(t.account.users,function(a){return[e("v-list",{key:a.account,staticClass:"py-0 transparent"},[e("v-list-tile",[e("v-list-tile-title",[t._v(t._s(a.account))])],1),e("v-divider")],1)]})],2)],1)],1)],1)],1)],1)],1)],1)},r=[],i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-dialog",{attrs:{persistent:"","content-class":"centered-dialog"},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}},[e("v-container",{attrs:{"fill-height":""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-progress-circular",{attrs:{indeterminate:"",size:50,width:5,color:t.progressColor}})],1)],1)],1)},n=[],o={name:"Loading",props:{value:{type:Boolean,default:!1},progressColor:{type:String,default:"purple"}}},l=o,c=(e("53a2"),e("2877")),d=Object(c["a"])(l,i,n,!1,null,null,null),u=d.exports,v={components:{loading:u},data(){return{isLoading:!0,joinDialog:!1,btnLoading:!1,account:{address:"loading...",referrer:"0x0000000000000000000000000000000000000000",userId:0,teamId:0,children:0,earnings:0,payouts:0,users:[]},team:{options:{price:0,brokerage:0},teamId:0,size:0,earnings:0,payouts:0}}},created(){setInterval(()=>{this.$web3.eth.getAccounts((t,a)=>{if(!t){this.$data.account.address=a[0];let t=this.$web3.contractInstance("TUser");t.methods.userIds(this.$data.account.address).call((a,e)=>{!a&&e&&(this.$data.account.userId=e,t.methods.users(e).call((t,a)=>{!t&&a&&(this.$data.account.teamId=a.teamId,this.$data.account.children=a.children,this.$data.account.earnings=this.$web3.utils.fromWei(a.earnings),this.$data.account.payouts=this.$web3.utils.fromWei(a.payouts))}))}),t.methods.teamIds(this.$data.account.address).call((a,e)=>{!a&&e&&(this.$data.team.teamId=e,t.methods.teams(e).call((t,a)=>{!t&&a&&(this.$data.team.size=a.size,this.$data.team.earnings=this.$web3.utils.fromWei(a.earnings),this.$data.team.payouts=this.$web3.utils.fromWei(a.payouts),this.$data.isLoading=!1)}))})}})},1e3);let t=this.$web3.contractInstance("TUserAgent");t.methods.options().call((t,a)=>{!t&&a&&(this.$data.team.options.price=this.$web3.utils.fromWei(a.price))})},methods:{refreshUsers(){this.$data.btnLoading=!0,this.$data.account.users=[],this.$web3.eth.getBlockNumber((t,a)=>{if(!t){let t=a-1e5,e=this.$web3.contractInstance("TUser");e.getPastEvents("UserAdded",{fromBlock:t,toBlock:"latest"},(t,a)=>{!t&&a.length>0&&(a.filter(t=>{t.returnValues.referrer==this.$data.account.address&&this.$data.account.users.push({account:t.returnValues.account,referrer:t.returnValues.referrer,teamId:t.returnValues.teamId})}),this.$data.btnLoading=!1)})}})},withdraw(){this.$data.btnLoading=!0,this.$web3.eth.getAccounts((t,a)=>{if(!t){this.$data.account.address=a[0];let t=this.$web3.contractInstance("TUser");t.methods.withdraw(a[0]).send({from:a[0],gas:15e5},(t,a)=>{t||(this.$data.btnLoading=!1)})}})},join(){this.$data.btnLoading=!0,this.$refs.form.validate()&&this.$web3.eth.getAccounts((t,a)=>{if(!t){this.$data.account.address=a[0];let t=this.$web3.contractInstance("TUserAgent"),e=this.$web3.contractInstance("TChip");e.methods.approveAndCall(t.options.address,this.$web3.utils.toWei(this.$data.team.options.price.toString()),this.$data.account.referrer).send({from:a[0],gas:15e5},(t,a)=>{t||(this.$data.joinDialog=!1,this.$data.btnLoading=!1)})}})}}},m=v,p=Object(c["a"])(m,s,r,!1,null,null,null);a["default"]=p.exports},"53a2":function(t,a,e){"use strict";var s=e("a6e4"),r=e.n(s);r.a},a6e4:function(t,a,e){}}]);